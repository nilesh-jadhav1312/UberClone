# POST /users/register

Description

- Register a new user. This endpoint is mounted at `/users/register` (assumes the users router is mounted at `/users`).
- Accepts JSON and returns a JWT token plus the created user.

Request

- Method: POST
- URL: `/users/register`
- Headers: `Content-Type: application/json`

Required JSON body

```
{
  "fullname": {
    "firstname": "John",
    "lastname": "Doe"
  },
  "email": "john@example.com",
  "password": "password123"
}
```

Validation rules

- `fullname.firstname`: string, required, minimum length 3
- `fullname.lastname`: string, required, minimum length 3
- `email`: required, must be a valid email
- `password`: required, minimum length 6

Responses / Status codes

- 201 Created
  - Description: User successfully created.
  - Body: JSON containing `token` (JWT) and `user` object (password is not returned).  sending as a response with JWT token and user details
  - Example:

```
HTTP/1.1 201 Created
{
  "token": "<jwt_token>",
  "user": {
    "_id": "64...",
    "fullname": { "firstname": "John", "lastname": "Doe" },
    "email": "john@example.com",
    "socketId": null
  }
}
```

- 400 Bad Request
  - Description: Validation failed (missing/invalid fields).
  - Body: `{ "errors": [ ... ] }` where each item includes validation details.
  - Example:

```
HTTP/1.1 400 Bad Request
{
  "errors": [
    { "msg": "Invalid Mail id", "param": "email", "location": "body" }
  ]
}
```

- 500 Internal Server Error
  - Description: Unexpected server/database error (e.g., duplicate email or DB failure).

Notes

- Passwords are hashed before being saved; the API does not return the plain password.
- The controller returns a JWT via `token` generated by `user.generateAuthToken()`.
- Ensure `process.env.JWT_SECRET` is set in your environment for token generation.
